{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\victo\\\\FullStackOpen2020\\\\Part3\\\\partThreePros\\\\phonebook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\Users\\\\victo\\\\FullStackOpen2020\\\\Part3\\\\partThreePros\\\\phonebook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\victo\\\\FullStackOpen2020\\\\Part3\\\\partThreePros\\\\phonebook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import Filter from'./Filter';import Form from'./Form';import Persons from'./Persons';import Notification from\"./Notification\";import'./index.css';import agendaService from\"./services/agenda\";// import axios from \"axios\";\nvar App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(_toConsumableArray(persons)),_useState8=_slicedToArray(_useState7,2),filterArr=_useState8[0],setNewFilterArr=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),notificationStatus=_useState12[0],setNotificationStatus=_useState12[1];useEffect(function(){console.log('effect');// axios.get(\"http://localhost:3001/persons\").then(response => {\n//   console.log('promise fulfilled')\n//   setPersons(response.data);\n//   setNewFilterArr(response.data);\n// })\nagendaService.getAll().then(function(initialPersons){setPersons(initialPersons);setNewFilterArr(initialPersons);});},[]);var handleFilter=function handleFilter(event){event.preventDefault();// console.log(event.target.value);\n// console.log(persons);\nvar filteredRslt=persons.filter(function(person){return person[\"name\"].includes(event.target.value);});setNewFilterArr(filteredRslt);// console.log(filteredRslt);\n};var handleChangeName=function handleChangeName(event){// console.log(event.target.value);\n// event.preventDefault();\nsetNewName(event.target.value);};var handleChangeNumber=function handleChangeNumber(event){// console.log(event.target.value);\n// event.preventDefault();\nsetNewNumber(event.target.value);};var handleClick=function handleClick(event){// console.log(...persons);\n// console.log([...persons,{name: newName}]);\nevent.preventDefault();var newPerson={name:newName,number:newNumber,id:newName};if(persons.some(function(person){return person.name===newName&&persons.some(function(person){return person.number===newNumber;});})){alert(\"\".concat(newName,\" is already added to phonebook\"));}else if(persons.some(function(person){return person.name===newName;})&&persons.some(function(person){return person.number!==newNumber;})){var mssg=\"\".concat(newName,\" is already added to phonebook but the number is different. Do you want update the number?\");if(window.confirm(mssg)){agendaService.numberUpdate(newName,newNumber).then(function(returnedDat){document.querySelector(\"#nameInput\").value=\"\";document.querySelector(\"#numberInput\").value=\"\";setNewName(\"\");setNewNumber(\"\");// console.log(persons);\n// const newArr = persons.map((item) =>\n//   item.id === returnedDat.id\n//     ? { ...item, number: returnedDat.number }\n//     : item\n// );\nvar newArr=persons.map(function(item){return item.name===returnedDat.name?_objectSpread(_objectSpread({},item),{},{number:returnedDat.number}):item;});// console.log(persons);\n// console.log(newArr);\nsetPersons(newArr);setNewFilterArr(newArr);});// Added New Number Successfull\nsetNotification(\"The number of \".concat(newName,\" has been modified\"));setNotificationStatus(\"num-modified\");setTimeout(function(){setNotification(null);},5000);}}else{// console.log(\"didn't exists\");\ndocument.querySelector(\"#nameInput\").value=\"\";document.querySelector(\"#numberInput\").value=\"\";setPersons([].concat(_toConsumableArray(persons),[{name:newName,number:newNumber}]));setNewFilterArr([].concat(_toConsumableArray(persons),[{name:newName,number:newNumber}]));agendaService.create(newPerson).then(function(returnedPersons){// console.log(returnedPersons);\nsetPersons(persons.concat(returnedPersons));setNewName(\"\");setNewNumber(\"\");});// Added Notification Successfull\nsetNotification(\"Added \".concat(newName));setNotificationStatus('successfull');setTimeout(function(){setNotification(null);},5000);}};var handleDelete=function handleDelete(id){var delItem=persons.filter(function(n){return n.id===id;});var undelItem=persons.filter(function(n){return n.id!==id;});var message=\"Do you really want to delete \".concat(id,\"?\");// window.confirm(message);\nif(window.confirm(message)){// window.prompt(\"You failed us\");\nagendaService.deletetion(id,delItem);setPersons(undelItem);setNewFilterArr(undelItem);}};return/*#__PURE__*/React.createElement(\"div\",{className:\"wrap\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Phonebook\"),/*#__PURE__*/React.createElement(Notification,{message:notification,status:notificationStatus}),/*#__PURE__*/React.createElement(Filter,{filterHandle:handleFilter}),/*#__PURE__*/React.createElement(\"h2\",null,\"Add a New\"),/*#__PURE__*/React.createElement(Form,{nameHandle:handleChangeName,numberHandle:handleChangeNumber,clickHandle:handleClick}),/*#__PURE__*/React.createElement(\"h2\",null,\"Numbers\"),/*#__PURE__*/React.createElement(Persons,{personsHandled:filterArr,deleteHandle:handleDelete}),/*#__PURE__*/React.createElement(\"div\",null,\"debug: \",newName));};ReactDOM.render(/*#__PURE__*/React.createElement(App,null),document.getElementById(\"root\"));","map":{"version":3,"sources":["C:/Users/victo/FullStackOpen2020/Part3/partThreePros/phonebook/src/index.js"],"names":["React","useState","useEffect","ReactDOM","Filter","Form","Persons","Notification","agendaService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filterArr","setNewFilterArr","notification","setNotification","notificationStatus","setNotificationStatus","console","log","getAll","then","initialPersons","handleFilter","event","preventDefault","filteredRslt","filter","person","includes","target","value","handleChangeName","handleChangeNumber","handleClick","newPerson","name","number","id","some","alert","mssg","window","confirm","numberUpdate","returnedDat","document","querySelector","newArr","map","item","setTimeout","create","returnedPersons","concat","handleDelete","delItem","n","undelItem","message","deletetion","render","getElementById"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Filter from './Filter';\nimport Form from './Form';\nimport Persons from './Persons';\nimport Notification from \"./Notification\";\nimport './index.css';\n\nimport agendaService from \"./services/agenda\";\n\n// import axios from \"axios\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterArr, setNewFilterArr] = useState([...persons]);\n  const [notification, setNotification] = useState(\"\");\n  const [notificationStatus, setNotificationStatus] = useState(\"\");\n\n  useEffect(() => {\n    console.log('effect');\n    // axios.get(\"http://localhost:3001/persons\").then(response => {\n    //   console.log('promise fulfilled')\n    //   setPersons(response.data);\n    //   setNewFilterArr(response.data);\n    // })\n    agendaService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n      setNewFilterArr(initialPersons);\n    });\n  }, [])\n\n  const handleFilter = (event) => {\n    event.preventDefault();\n    // console.log(event.target.value);\n    // console.log(persons);\n    const filteredRslt = persons.filter((person) => {\n      return person[\"name\"].includes(event.target.value);\n    });\n\n    setNewFilterArr(filteredRslt);\n    // console.log(filteredRslt);\n  };\n\n  const handleChangeName = (event) => {\n    // console.log(event.target.value);\n    // event.preventDefault();\n    setNewName(event.target.value);\n  };\n\n  const handleChangeNumber = (event) => {\n    // console.log(event.target.value);\n    // event.preventDefault();\n    setNewNumber(event.target.value);\n  };\n\n  const handleClick = (event) => {\n    // console.log(...persons);\n    // console.log([...persons,{name: newName}]);\n    event.preventDefault();\n\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n      id: newName,\n    };\n\n\n    if (persons.some((person) => person.name === newName && persons.some((person) => person.number === newNumber))) {\n      \n      alert(`${newName} is already added to phonebook`);\n\n    } else if (persons.some((person) => person.name === newName) && persons.some((person) => person.number !== newNumber)) {\n      \n      const mssg = `${newName} is already added to phonebook but the number is different. Do you want update the number?`;\n      \n      if (window.confirm(mssg)){\n        agendaService.numberUpdate(newName, newNumber).then((returnedDat) => {\n          document.querySelector(\"#nameInput\").value = \"\";\n          document.querySelector(\"#numberInput\").value = \"\";\n          setNewName(\"\");\n          setNewNumber(\"\");\n\n          // console.log(persons);\n\n          // const newArr = persons.map((item) =>\n          //   item.id === returnedDat.id\n          //     ? { ...item, number: returnedDat.number }\n          //     : item\n          // );\n\n          const newArr = persons.map((item) =>\n            item.name === returnedDat.name\n              ? { ...item, number: returnedDat.number }\n              : item\n          );\n\n          // console.log(persons);\n          // console.log(newArr);\n\n          setPersons(newArr);\n          setNewFilterArr(newArr);\n        });\n\n        // Added New Number Successfull\n        setNotification(`The number of ${newName} has been modified`);\n        setNotificationStatus(\"num-modified\");\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n      }\n\n    } else {\n      // console.log(\"didn't exists\");\n      document.querySelector(\"#nameInput\").value = \"\";\n      document.querySelector(\"#numberInput\").value = \"\";\n      setPersons([...persons, { name: newName, number: newNumber }]);\n      setNewFilterArr([...persons, { name: newName, number: newNumber }]);\n\n      agendaService.create(newPerson).then((returnedPersons) => {\n        // console.log(returnedPersons);\n        setPersons(persons.concat(returnedPersons));\n        setNewName(\"\");\n        setNewNumber(\"\");\n      });\n\n      // Added Notification Successfull\n      setNotification(`Added ${newName}`);\n      setNotificationStatus('successfull');\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    }\n  };\n\n  const handleDelete = (id) => {\n    const delItem = persons.filter((n) => n.id === id);\n    const undelItem = persons.filter((n) => n.id !== id);\n\n    const message = `Do you really want to delete ${id}?`;\n    \n    // window.confirm(message);\n\n    if(window.confirm(message)) {\n      // window.prompt(\"You failed us\");\n      agendaService.deletetion(id, delItem);\n      setPersons(undelItem);\n      setNewFilterArr(undelItem);\n    }\n  };\n\n  return (\n    <div className=\"wrap\">\n      <h2>Phonebook</h2>\n\n      <Notification message={notification} status={notificationStatus} />\n\n      <Filter filterHandle={handleFilter} />\n\n      <h2>Add a New</h2>\n\n      <Form\n        nameHandle={handleChangeName}\n        numberHandle={handleChangeNumber}\n        clickHandle={handleClick}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons personsHandled={filterArr} deleteHandle={handleDelete} />\n\n      <div>debug: {newName}</div>\n    </div>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));"]},"metadata":{},"sourceType":"module"}